---
title: Core Extra Test Spec
author: Vladimir Schneider
version: 0.1
date: '2016-06-06'
license: '[CC-BY-SA 4.0](http://creativecommons.org/licenses/by-sa/4.0/)'
...

## Extra tests

Converts footnote references and definitions to footnotes in the HTML page


Code fence starting with setext header marker

```````````````````````````````` example Extra tests: 1
```markdown
---
```
.
<pre><code class="language-markdown">---
</code></pre>
.
Document[0, 20]
  FencedCodeBlock[0, 19] open:[0, 3, "```"] info:[3, 11, "markdown"] content:[12, 16] lines[3] close:[16, 19, "```"]
````````````````````````````````



```````````````````````````````` example Extra tests: 2
```markdown
===
```
.
<pre><code class="language-markdown">===
</code></pre>
.
Document[0, 20]
  FencedCodeBlock[0, 19] open:[0, 3, "```"] info:[3, 11, "markdown"] content:[12, 16] lines[3] close:[16, 19, "```"]
````````````````````````````````


Make sure indentation is properly implemented

```````````````````````````````` example Extra tests: 3
> - item 1
> - item 2
>     1. item 1
>     2. item 2
.
<blockquote>
  <ul>
    <li>item 1</li>
    <li>item 2
      <ol>
        <li>item 1</li>
        <li>item 2</li>
      </ol>
    </li>
  </ul>
</blockquote>
.
Document[0, 54]
  BlockQuote[0, 54] marker:[0, 1, ">"]
    BulletList[2, 54]
      ListItem[2, 11] open:[2, 3, "-"]
        Paragraph[4, 11]
          Text[4, 10] chars:[4, 10, "item 1"]
      ListItem[13, 54] open:[13, 14, "-"]
        Paragraph[15, 22]
          Text[15, 21] chars:[15, 21, "item 2"]
        OrderedList[28, 54]
          ListItem[28, 38] open:[28, 30, "1."]
            Paragraph[31, 38]
              Text[31, 37] chars:[31, 37, "item 1"]
          ListItem[44, 54] open:[44, 46, "2."]
            Paragraph[47, 54]
              Text[47, 53] chars:[47, 53, "item 2"]
````````````````````````````````


Make sure indentation is properly implemented

```````````````````````````````` example Extra tests: 4
> - item 1
>
> - item 2
>
>     1. item 1
>
>     2. item 2
.
<blockquote>
  <ul>
    <li>
      <p>item 1</p>
    </li>
    <li>
      <p>item 2</p>
      <ol>
        <li>
          <p>item 1</p>
        </li>
        <li>
          <p>item 2</p>
        </li>
      </ol>
    </li>
  </ul>
</blockquote>
.
Document[0, 60]
  BlockQuote[0, 60] marker:[0, 1, ">"]
    BulletList[2, 60]
      ListItem[2, 11] open:[2, 3, "-"]
        Paragraph[4, 11]
          Text[4, 10] chars:[4, 10, "item 1"]
      ListItem[15, 60] open:[15, 16, "-"]
        Paragraph[17, 24]
          Text[17, 23] chars:[17, 23, "item 2"]
        OrderedList[32, 60]
          ListItem[32, 42] open:[32, 34, "1."]
            Paragraph[35, 42]
              Text[35, 41] chars:[35, 41, "item 1"]
          ListItem[50, 60] open:[50, 52, "2."]
            Paragraph[53, 60]
              Text[53, 59] chars:[53, 59, "item 2"]
````````````````````````````````


## Reference Repository Keep First tests

Test repository KEEP_FIRST behavior, meaning the first reference def is used

```````````````````````````````` example Reference Repository Keep First tests: 1
[ref]

[ref]: /url1
[ref]: /url2
[ref]: /url3
.
<p><a href="/url1">ref</a></p>
.
Document[0, 46]
  Paragraph[0, 6]
    LinkRef[0, 5] textOpen:[0, 0] text:[0, 0] textClose:[0, 0] referenceOpen:[0, 1, "["] reference:[1, 4, "ref"] referenceClose:[4, 5, "]"]
      Text[1, 4] chars:[1, 4, "ref"]
  Reference[7, 19] refOpen:[7, 8, "["] ref:[8, 11, "ref"] refClose:[11, 13, "]:"] urlOpen:[0, 0] url:[14, 19, "/url1"] urlClose:[0, 0] titleOpen:[0, 0] title:[0, 0] titleClose:[0, 0]
  Reference[20, 32] refOpen:[20, 21, "["] ref:[21, 24, "ref"] refClose:[24, 26, "]:"] urlOpen:[0, 0] url:[27, 32, "/url2"] urlClose:[0, 0] titleOpen:[0, 0] title:[0, 0] titleClose:[0, 0]
  Reference[33, 45] refOpen:[33, 34, "["] ref:[34, 37, "ref"] refClose:[37, 39, "]:"] urlOpen:[0, 0] url:[40, 45, "/url3"] urlClose:[0, 0] titleOpen:[0, 0] title:[0, 0] titleClose:[0, 0]
````````````````````````````````

## Reference Repository Keep Last tests

Test repository KEEP_LAST behavior, meaning the last reference def is used

```````````````````````````````` example(Reference Repository Keep Last tests: 1) options(keep-last)
[ref]

[ref]: /url1
[ref]: /url2
[ref]: /url3
.
<p><a href="/url3">ref</a></p>
.
Document[0, 46]
  Paragraph[0, 6]
    LinkRef[0, 5] textOpen:[0, 0] text:[0, 0] textClose:[0, 0] referenceOpen:[0, 1, "["] reference:[1, 4, "ref"] referenceClose:[4, 5, "]"]
      Text[1, 4] chars:[1, 4, "ref"]
  Reference[7, 19] refOpen:[7, 8, "["] ref:[8, 11, "ref"] refClose:[11, 13, "]:"] urlOpen:[0, 0] url:[14, 19, "/url1"] urlClose:[0, 0] titleOpen:[0, 0] title:[0, 0] titleClose:[0, 0]
  Reference[20, 32] refOpen:[20, 21, "["] ref:[21, 24, "ref"] refClose:[24, 26, "]:"] urlOpen:[0, 0] url:[27, 32, "/url2"] urlClose:[0, 0] titleOpen:[0, 0] title:[0, 0] titleClose:[0, 0]
  Reference[33, 45] refOpen:[33, 34, "["] ref:[34, 37, "ref"] refClose:[37, 39, "]:"] urlOpen:[0, 0] url:[40, 45, "/url3"] urlClose:[0, 0] titleOpen:[0, 0] title:[0, 0] titleClose:[0, 0]
````````````````````````````````



## Emphasis tests

Some weird commonmark processing of emphasis

```````````````````````````````` example(Emphasis tests: 1) options(relaxed-emphasis, ignore)
**bold*bold-italic*bold**
.
<p><strong>bold<em>bold-italic</em>bold</strong></p>
.
Document[0, 26]
  Paragraph[0, 26]
    StrongEmphasis[0, 19] textOpen:[0, 2, "**"] text:[2, 23, "bold*bold-italic*bold"] textClose:[23, 25, "*"]
      Text[2, 6] chars:[2, 6, "bold"]
      Emphasis[7, 20] textOpen:[7, 8, "*"] text:[8, 19, "bold-italic"] textClose:[19, 20, "*"]
        Text[8, 19] chars:[7, 18, "bold-"..."talic"]
      Text[19, 23] chars:[19, 23, "bold"]
````````````````````````````````


Some weird commonmark processing of emphasis

```````````````````````````````` example Emphasis tests: 2
**bold *bold-italic* bold**
.
<p><strong>bold <em>bold-italic</em> bold</strong></p>
.
Document[0, 28]
  Paragraph[0, 28]
    StrongEmphasis[0, 27] textOpen:[0, 2, "**"] text:[2, 25, "bold *bold-italic* bold"] textClose:[25, 27, "**"]
      Text[2, 7] chars:[2, 7, "bold "]
      Emphasis[7, 20] textOpen:[7, 8, "*"] text:[8, 19, "bold-italic"] textClose:[19, 20, "*"]
        Text[8, 19] chars:[8, 19, "bold-"..."talic"]
      Text[20, 25] chars:[20, 25, " bold"]
````````````````````````````````

## ATX Header options

Allow atx headers without a space between # and the title

```````````````````````````````` example(ATX Header options: 1) options(hdr-no-atx-space)
#Heading                                                                            
##Heading                                                                            
###Heading                                                                            
####Heading                                                                            
#####Heading                                                                            
######Heading                                                                            

#Heading #                                                                            
##Heading #                                                                            
###Heading #                                                                            
####Heading #                                                                            
#####Heading #                                                                            
######Heading #                                                                            
.
<h1>Heading</h1>
<h2>Heading</h2>
<h3>Heading</h3>
<h4>Heading</h4>
<h5>Heading</h5>
<h6>Heading</h6>
<h1>Heading</h1>
<h2>Heading</h2>
<h3>Heading</h3>
<h4>Heading</h4>
<h5>Heading</h5>
<h6>Heading</h6>
.
Document[0, 1063]
  Heading[0, 8] textOpen:[0, 1, "#"] text:[1, 8, "Heading"] textClose:[0, 0]
    Text[1, 8] chars:[1, 8, "Heading"]
  Heading[85, 94] textOpen:[85, 87, "##"] text:[87, 94, "Heading"] textClose:[0, 0]
    Text[87, 94] chars:[87, 94, "Heading"]
  Heading[171, 181] textOpen:[171, 174, "###"] text:[174, 181, "Heading"] textClose:[0, 0]
    Text[174, 181] chars:[174, 181, "Heading"]
  Heading[258, 269] textOpen:[258, 262, "####"] text:[262, 269, "Heading"] textClose:[0, 0]
    Text[262, 269] chars:[262, 269, "Heading"]
  Heading[346, 358] textOpen:[346, 351, "#####"] text:[351, 358, "Heading"] textClose:[0, 0]
    Text[351, 358] chars:[351, 358, "Heading"]
  Heading[435, 448] textOpen:[435, 441, "######"] text:[441, 448, "Heading"] textClose:[0, 0]
    Text[441, 448] chars:[441, 448, "Heading"]
  Heading[526, 536] textOpen:[526, 527, "#"] text:[527, 534, "Heading"] textClose:[535, 536, "#"]
    Text[527, 534] chars:[527, 534, "Heading"]
  Heading[613, 624] textOpen:[613, 615, "##"] text:[615, 622, "Heading"] textClose:[623, 624, "#"]
    Text[615, 622] chars:[615, 622, "Heading"]
  Heading[701, 713] textOpen:[701, 704, "###"] text:[704, 711, "Heading"] textClose:[712, 713, "#"]
    Text[704, 711] chars:[704, 711, "Heading"]
  Heading[790, 803] textOpen:[790, 794, "####"] text:[794, 801, "Heading"] textClose:[802, 803, "#"]
    Text[794, 801] chars:[794, 801, "Heading"]
  Heading[880, 894] textOpen:[880, 885, "#####"] text:[885, 892, "Heading"] textClose:[893, 894, "#"]
    Text[885, 892] chars:[885, 892, "Heading"]
  Heading[971, 986] textOpen:[971, 977, "######"] text:[977, 984, "Heading"] textClose:[985, 986, "#"]
    Text[977, 984] chars:[977, 984, "Heading"]
````````````````````````````````

Don't allow leading spaces 

```````````````````````````````` example(ATX Header options: 2) options(hdr-no-lead-space)
 # Heading
 ## Heading
 ### Heading
 #### Heading
 ##### Heading
 ###### Heading
.
<p># Heading
## Heading
### Heading
#### Heading
##### Heading
###### Heading</p>
.
Document[0, 81]
  Paragraph[1, 81]
    Text[1, 10] chars:[1, 10, "# Heading"]
    SoftLineBreak[10, 11]
    Text[12, 22] chars:[12, 22, "## Heading"]
    SoftLineBreak[22, 23]
    Text[24, 35] chars:[24, 35, "### H"..."ading"]
    SoftLineBreak[35, 36]
    Text[37, 49] chars:[37, 49, "#### "..."ading"]
    SoftLineBreak[49, 50]
    Text[51, 64] chars:[51, 64, "#####"..."ading"]
    SoftLineBreak[64, 65]
    Text[66, 80] chars:[66, 80, "#####"..."ading"]
````````````````````````````````


Don't allow leading spaces 

```````````````````````````````` example(ATX Header options: 3) options(hdr-no-lead-space, hdr-no-atx-space)
 # Heading
 ## Heading
 ### Heading
 #### Heading
 ##### Heading
 ###### Heading
.
<p># Heading
## Heading
### Heading
#### Heading
##### Heading
###### Heading</p>
.
Document[0, 81]
  Paragraph[1, 81]
    Text[1, 10] chars:[1, 10, "# Heading"]
    SoftLineBreak[10, 11]
    Text[12, 22] chars:[12, 22, "## Heading"]
    SoftLineBreak[22, 23]
    Text[24, 35] chars:[24, 35, "### H"..."ading"]
    SoftLineBreak[35, 36]
    Text[37, 49] chars:[37, 49, "#### "..."ading"]
    SoftLineBreak[49, 50]
    Text[51, 64] chars:[51, 64, "#####"..."ading"]
    SoftLineBreak[64, 65]
    Text[66, 80] chars:[66, 80, "#####"..."ading"]
````````````````````````````````


