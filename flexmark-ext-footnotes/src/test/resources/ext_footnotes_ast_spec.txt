---
title: Footnotes Extension Spec
author: Vladimir Schneider
version: 0.1
date: '2016-06-06'
license: '[CC-BY-SA 4.0](http://creativecommons.org/licenses/by-sa/4.0/)'
...

## Footnotes

Converts footnote references and definitions to footnotes in the HTML page.  
A footnote is a link reference starting with a ^ with the definition being the 
same: [^ref]: footnote.

A footnote definition is a container block that can contain any element as long as it 
is indented by 4 spaces or a tab from the indent level of the footnote.

```````````````````````````````` example
This paragraph has a footnote[^footnote].

[^footnote]: This is the body of the footnote.
with continuation text. Inline _italic_ and 
**bold**.

    Multiple paragraphs are supported as other 
    markdown elements such as lists.
    
    - item 1
    - item 2
.
<p>This paragraph has a footnote<sup id="fnref-1"><a class="footnote-ref" href="#fn-1">1</a></sup>.</p>
<div class="footnotes">
  <hr />
  <ol>
    <li id="fn-1">
      <p>This is the body of the footnote.
      with continuation text. Inline <em>italic</em> and
      <strong>bold</strong>.</p>
      <p>Multiple paragraphs are supported as other
      markdown elements such as lists.</p>
      <ul>
        <li>item 1</li>
        <li>item 2</li>
      </ul>
      <a href="#fnref-1" class="footnote-backref">&#8617;</a>
    </li>
  </ol>
</div>
.
Document[0, 262]
  Paragraph[0, 42]
    Text[0, 29]
    Footnote[29, 40] ordinal: 1  textOpen:[29, 31, "[^"] text:[31, 39, "footnote"] textClose:[39, 40, "]"]
    Text[40, 41]
  FootnoteBlock[43, 89] ordinal: 1  open:[43, 45] text:[45, 53] close:[53, 55] footnote:[56, 89]
    Paragraph[56, 145]
      Text[56, 89]
      SoftLineBreak[89, 90]
      Text[90, 121]
      Emphasis[121, 129] textOpen:[121, 122, "_"] text:[122, 128] textClose:[128, 129, "_"]
        Text[122, 128]
      Text[129, 133]
      SoftLineBreak[134, 135]
      StrongEmphasis[135, 143] textOpen:[135, 137, "**"] text:[137, 141] textClose:[141, 143, "**"]
        Text[137, 141]
      Text[143, 144]
    Paragraph[150, 231]
      Text[150, 192]
      SoftLineBreak[193, 194]
      Text[198, 230]
    BulletList[240, 262]
      ListItem[240, 249] open:[240, 241, "-"]
        Paragraph[242, 249]
          Text[242, 248]
      ListItem[253, 262] open:[253, 254, "-"]
        Paragraph[255, 262]
          Text[255, 261]
````````````````````````````````

Not a footnote nor a footnote definition if space between [ and ^.

```````````````````````````````` example
This paragraph has no footnote[ ^footnote].

[ ^footnote]: This is the body of the footnote.
with continuation text. Inline _italic_ and 
**bold**.

    Multiple paragraphs are supported as other 
    markdown elements such as lists.
    
    - item 1
    - item 2
.
<p>This paragraph has no footnote[ ^footnote].</p>
<p>[ ^footnote]: This is the body of the footnote.
with continuation text. Inline <em>italic</em> and
<strong>bold</strong>.</p>
<pre><code>Multiple paragraphs are supported as other 
markdown elements such as lists.

- item 1
- item 2
</code></pre>
.
Document[0, 265]
  Paragraph[0, 44]
    Text[0, 30]
    LinkRef[30, 42] textOpen:[0, 0] text:[0, 0] textClose:[0, 0] referenceOpen:[30, 31, "["] reference:[32, 41, "^footnote"] referenceClose:[41, 42, "]"]
      Text[31, 41]
    Text[42, 43]
  Paragraph[45, 148]
    LinkRef[45, 57] textOpen:[0, 0] text:[0, 0] textClose:[0, 0] referenceOpen:[45, 46, "["] reference:[47, 56, "^footnote"] referenceClose:[56, 57, "]"]
      Text[46, 56]
    Text[57, 92]
    SoftLineBreak[92, 93]
    Text[93, 124]
    Emphasis[124, 132] textOpen:[124, 125, "_"] text:[125, 131] textClose:[131, 132, "_"]
      Text[125, 131]
    Text[132, 136]
    SoftLineBreak[137, 138]
    StrongEmphasis[138, 146] textOpen:[138, 140, "**"] text:[140, 144] textClose:[144, 146, "**"]
      Text[140, 144]
    Text[146, 147]
  IndentedCodeBlock[153, 265]
````````````````````````````````

Unused footnotes are not used and do not show up on the page.

```````````````````````````````` example
This paragraph has a footnote[^2].

[^1]: This is the body of the unused footnote.
with continuation text. Inline _italic_ and 
**bold**.

[^2]: This is the body of the footnote.
with continuation text. Inline _italic_ and 
**bold**.

    Multiple paragraphs are supported as other 
    markdown elements such as lists.
    
    - item 1
    - item 2
.
<p>This paragraph has a footnote<sup id="fnref-1"><a class="footnote-ref" href="#fn-1">1</a></sup>.</p>
<div class="footnotes">
  <hr />
  <ol>
    <li id="fn-1">
      <p>This is the body of the footnote.
      with continuation text. Inline <em>italic</em> and
      <strong>bold</strong>.</p>
      <p>Multiple paragraphs are supported as other
      markdown elements such as lists.</p>
      <ul>
        <li>item 1</li>
        <li>item 2</li>
      </ul>
      <a href="#fnref-1" class="footnote-backref">&#8617;</a>
    </li>
  </ol>
</div>
.
Document[0, 351]
  Paragraph[0, 35]
    Text[0, 29]
    Footnote[29, 33] ordinal: 1  textOpen:[29, 31, "[^"] text:[31, 32, "2"] textClose:[32, 33, "]"]
    Text[33, 34]
  FootnoteBlock[36, 82] ordinal: 0  open:[36, 38] text:[38, 39] close:[39, 41] footnote:[42, 82]
    Paragraph[42, 138]
      Text[42, 82]
      SoftLineBreak[82, 83]
      Text[83, 114]
      Emphasis[114, 122] textOpen:[114, 115, "_"] text:[115, 121] textClose:[121, 122, "_"]
        Text[115, 121]
      Text[122, 126]
      SoftLineBreak[127, 128]
      StrongEmphasis[128, 136] textOpen:[128, 130, "**"] text:[130, 134] textClose:[134, 136, "**"]
        Text[130, 134]
      Text[136, 137]
  FootnoteBlock[139, 178] ordinal: 1  open:[139, 141] text:[141, 142] close:[142, 144] footnote:[145, 178]
    Paragraph[145, 234]
      Text[145, 178]
      SoftLineBreak[178, 179]
      Text[179, 210]
      Emphasis[210, 218] textOpen:[210, 211, "_"] text:[211, 217] textClose:[217, 218, "_"]
        Text[211, 217]
      Text[218, 222]
      SoftLineBreak[223, 224]
      StrongEmphasis[224, 232] textOpen:[224, 226, "**"] text:[226, 230] textClose:[230, 232, "**"]
        Text[226, 230]
      Text[232, 233]
    Paragraph[239, 320]
      Text[239, 281]
      SoftLineBreak[282, 283]
      Text[287, 319]
    BulletList[329, 351]
      ListItem[329, 338] open:[329, 330, "-"]
        Paragraph[331, 338]
          Text[331, 337]
      ListItem[342, 351] open:[342, 343, "-"]
        Paragraph[344, 351]
          Text[344, 350]
````````````````````````````````

Undefined footnotes are rendered as if they were text, with emphasis left as is. 

```````````````````````````````` example
This paragraph has a footnote[^**footnote**].

[^footnote]: This is the body of the footnote.
with continuation text. Inline _italic_ and 
**bold**.

    Multiple paragraphs are supported as other 
    markdown elements such as lists.
    
    - item 1
    - item 2
.
<p>This paragraph has a footnote[^<strong>footnote</strong>].</p>
.
Document[0, 266]
  Paragraph[0, 46]
    Text[0, 29]
    Footnote[29, 44] ordinal: 0  textOpen:[29, 31, "[^"] text:[31, 43, "**footnote**"] textClose:[43, 44, "]"]
      Text[31, 31]
      StrongEmphasis[31, 43] textOpen:[31, 33, "**"] text:[33, 41] textClose:[41, 43, "**"]
        Text[33, 41]
    Text[44, 45]
  FootnoteBlock[47, 93] ordinal: 0  open:[47, 49] text:[49, 57] close:[57, 59] footnote:[60, 93]
    Paragraph[60, 149]
      Text[60, 93]
      SoftLineBreak[93, 94]
      Text[94, 125]
      Emphasis[125, 133] textOpen:[125, 126, "_"] text:[126, 132] textClose:[132, 133, "_"]
        Text[126, 132]
      Text[133, 137]
      SoftLineBreak[138, 139]
      StrongEmphasis[139, 147] textOpen:[139, 141, "**"] text:[141, 145] textClose:[145, 147, "**"]
        Text[141, 145]
      Text[147, 148]
    Paragraph[154, 235]
      Text[154, 196]
      SoftLineBreak[197, 198]
      Text[202, 234]
    BulletList[244, 266]
      ListItem[244, 253] open:[244, 245, "-"]
        Paragraph[246, 253]
          Text[246, 252]
      ListItem[257, 266] open:[257, 258, "-"]
        Paragraph[259, 266]
          Text[259, 265]
````````````````````````````````

Footnote numbers are assigned in order of their reference in the document

```````````````````````````````` example
This paragraph has a footnote[^2]. Followed by another[^1]. 

[^1]: This is the body of the unused footnote.
with continuation text. Inline _italic_ and 
**bold**.

[^2]: This is the body of the footnote.
with continuation text. Inline _italic_ and 
**bold**.

    Multiple paragraphs are supported as other 
    markdown elements such as lists.
    
    - item 1
    - item 2
.
<p>This paragraph has a footnote<sup id="fnref-1"><a class="footnote-ref" href="#fn-1">1</a></sup>. Followed by another<sup id="fnref-2"><a class="footnote-ref" href="#fn-2">2</a></sup>.</p>
<div class="footnotes">
  <hr />
  <ol>
    <li id="fn-1">
      <p>This is the body of the footnote.
      with continuation text. Inline <em>italic</em> and
      <strong>bold</strong>.</p>
      <p>Multiple paragraphs are supported as other
      markdown elements such as lists.</p>
      <ul>
        <li>item 1</li>
        <li>item 2</li>
      </ul>
      <a href="#fnref-1" class="footnote-backref">&#8617;</a>
    </li>
    <li id="fn-2">
      <p>This is the body of the unused footnote.
      with continuation text. Inline <em>italic</em> and
      <strong>bold</strong>.</p>
      <a href="#fnref-2" class="footnote-backref">&#8617;</a>
    </li>
  </ol>
</div>
.
Document[0, 377]
  Paragraph[0, 61]
    Text[0, 29]
    Footnote[29, 33] ordinal: 1  textOpen:[29, 31, "[^"] text:[31, 32, "2"] textClose:[32, 33, "]"]
    Text[33, 54]
    Footnote[54, 58] ordinal: 2  textOpen:[54, 56, "[^"] text:[56, 57, "1"] textClose:[57, 58, "]"]
    Text[58, 59]
  FootnoteBlock[62, 108] ordinal: 2  open:[62, 64] text:[64, 65] close:[65, 67] footnote:[68, 108]
    Paragraph[68, 164]
      Text[68, 108]
      SoftLineBreak[108, 109]
      Text[109, 140]
      Emphasis[140, 148] textOpen:[140, 141, "_"] text:[141, 147] textClose:[147, 148, "_"]
        Text[141, 147]
      Text[148, 152]
      SoftLineBreak[153, 154]
      StrongEmphasis[154, 162] textOpen:[154, 156, "**"] text:[156, 160] textClose:[160, 162, "**"]
        Text[156, 160]
      Text[162, 163]
  FootnoteBlock[165, 204] ordinal: 1  open:[165, 167] text:[167, 168] close:[168, 170] footnote:[171, 204]
    Paragraph[171, 260]
      Text[171, 204]
      SoftLineBreak[204, 205]
      Text[205, 236]
      Emphasis[236, 244] textOpen:[236, 237, "_"] text:[237, 243] textClose:[243, 244, "_"]
        Text[237, 243]
      Text[244, 248]
      SoftLineBreak[249, 250]
      StrongEmphasis[250, 258] textOpen:[250, 252, "**"] text:[252, 256] textClose:[256, 258, "**"]
        Text[252, 256]
      Text[258, 259]
    Paragraph[265, 346]
      Text[265, 307]
      SoftLineBreak[308, 309]
      Text[313, 345]
    BulletList[355, 377]
      ListItem[355, 364] open:[355, 356, "-"]
        Paragraph[357, 364]
          Text[357, 363]
      ListItem[368, 377] open:[368, 369, "-"]
        Paragraph[370, 377]
          Text[370, 376]
````````````````````````````````



Footnotes can contain other footnotes.

```````````````````````````````` example
This paragraph has a footnote[^2].  

[^2]: This is the body of the footnote.
with continuation text. Inline _italic_ and 
**bold**.

    Multiple paragraphs are supported as other 
    markdown elements such as lists and footnotes[^1].
    
    - item 1
    - item 2
    
    [^1]: This is the body of a nested footnote.
    with continuation text. Inline _italic_ and 
    **bold**.
.
<p>This paragraph has a footnote<sup id="fnref-1"><a class="footnote-ref" href="#fn-1">1</a></sup>.</p>
<div class="footnotes">
  <hr />
  <ol>
    <li id="fn-1">
      <p>This is the body of the footnote.
      with continuation text. Inline <em>italic</em> and
      <strong>bold</strong>.</p>
      <p>Multiple paragraphs are supported as other
      markdown elements such as lists and footnotes<sup id="fnref-2"><a class="footnote-ref" href="#fn-2">2</a></sup>.</p>
      <ul>
        <li>item 1</li>
        <li>item 2</li>
      </ul>
      <a href="#fnref-1" class="footnote-backref">&#8617;</a>
    </li>
    <li id="fn-2">
      <p>This is the body of a nested footnote.
      with continuation text. Inline <em>italic</em> and
      <strong>bold</strong>.</p>
      <a href="#fnref-2" class="footnote-backref">&#8617;</a>
    </li>
  </ol>
</div>
.
Document[0, 385]
  Paragraph[0, 37]
    Text[0, 29]
    Footnote[29, 33] ordinal: 1  textOpen:[29, 31, "[^"] text:[31, 32, "2"] textClose:[32, 33, "]"]
    Text[33, 34]
  FootnoteBlock[38, 77] ordinal: 1  open:[38, 40] text:[40, 41] close:[41, 43] footnote:[44, 77]
    Paragraph[44, 133]
      Text[44, 77]
      SoftLineBreak[77, 78]
      Text[78, 109]
      Emphasis[109, 117] textOpen:[109, 110, "_"] text:[110, 116] textClose:[116, 117, "_"]
        Text[110, 116]
      Text[117, 121]
      SoftLineBreak[122, 123]
      StrongEmphasis[123, 131] textOpen:[123, 125, "**"] text:[125, 129] textClose:[129, 131, "**"]
        Text[125, 129]
      Text[131, 132]
    Paragraph[138, 237]
      Text[138, 180]
      SoftLineBreak[181, 182]
      Text[186, 231]
      Footnote[231, 235] ordinal: 2  textOpen:[231, 233, "[^"] text:[233, 234, "1"] textClose:[234, 235, "]"]
      Text[235, 236]
    BulletList[246, 268]
      ListItem[246, 255] open:[246, 247, "-"]
        Paragraph[248, 255]
          Text[248, 254]
      ListItem[259, 268] open:[259, 260, "-"]
        Paragraph[261, 268]
          Text[261, 267]
    FootnoteBlock[277, 321] ordinal: 2  open:[277, 279] text:[279, 280] close:[280, 282] footnote:[283, 321]
      Paragraph[283, 385]
        Text[283, 321]
        SoftLineBreak[321, 322]
        Text[326, 357]
        Emphasis[357, 365] textOpen:[357, 358, "_"] text:[358, 364] textClose:[364, 365, "_"]
          Text[358, 364]
        Text[365, 369]
        SoftLineBreak[370, 371]
        StrongEmphasis[375, 383] textOpen:[375, 377, "**"] text:[377, 381] textClose:[381, 383, "**"]
          Text[377, 381]
        Text[383, 384]
````````````````````````````````



